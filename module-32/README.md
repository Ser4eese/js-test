# –ú–æ–¥—É–ª—å 32: –§–∏–Ω–∞–ª—å–Ω—ã–π –ø—Ä–æ–µ–∫—Ç ‚Äî Notes App

## üéØ –¶–µ–ª—å –º–æ–¥—É–ª—è

–°–æ–±—Ä–∞—Ç—å –ø–æ–ª–Ω–æ—Ü–µ–Ω–Ω–æ–µ fullstack-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ, –∏—Å–ø–æ–ª—å–∑—É—è –≤—Å–µ –∑–Ω–∞–Ω–∏—è –∫—É—Ä—Å–∞.

---

## üìö –ß—Ç–æ –≤—ã –±—É–¥–µ—Ç–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å

| –ú–æ–¥—É–ª—å | –¢–µ—Ö–Ω–æ–ª–æ–≥–∏—è | –ì–¥–µ –ø—Ä–∏–º–µ–Ω—è–µ—Ç—Å—è |
|--------|------------|-----------------|
| 28 | fs (JSON-—Ñ–∞–π–ª) | –•—Ä–∞–Ω–∏–ª–∏—â–µ –∑–∞–º–µ—Ç–æ–∫ |
| 29 | Express | API —Å–µ—Ä–≤–µ—Ä |
| 26 | CORS | –°–≤—è–∑–∫–∞ —Ñ—Ä–æ–Ω—Ç-–±—ç–∫ |
| 25 | POST/DELETE | –°–æ–∑–¥–∞–Ω–∏–µ –∏ —É–¥–∞–ª–µ–Ω–∏–µ |
| 30 | React (JSX, props, useState) | –ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ã |
| 31 | React + fetch (useEffect) | –ó–∞–≥—Ä—É–∑–∫–∞ –¥–∞–Ω–Ω—ã—Ö |

---

## üìã –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞

```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê       ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ    React (App.jsx)     ‚îÇ fetch ‚îÇ   Express (server.js)   ‚îÇ
‚îÇ                        ‚îÇ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚Üí‚îÇ                         ‚îÇ
‚îÇ  NoteList              ‚îÇ       ‚îÇ  GET    /api/notes      ‚îÇ
‚îÇ    NoteItem √óN         ‚îÇ‚Üê‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÇ  POST   /api/notes      ‚îÇ
‚îÇ  AddNoteForm           ‚îÇ JSON  ‚îÇ  DELETE /api/notes/:id  ‚îÇ
‚îÇ                        ‚îÇ       ‚îÇ  PATCH  /api/notes/:id  ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò       ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
                                            ‚îÇ
                                   ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚ñº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
                                   ‚îÇ   notes.json    ‚îÇ
                                   ‚îÇ  (—Ñ–∞–π–ª –Ω–∞ –¥–∏—Å–∫–µ)‚îÇ
                                   ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

---

## ‚úèÔ∏è –ó–∞–¥–∞–Ω–∏–µ

### –ß–∞—Å—Ç—å 1: –•—Ä–∞–Ω–∏–ª–∏—â–µ (store.js)

–°–æ–∑–¥–∞–π—Ç–µ `createStore(filepath)` ‚Äî JSON-—Ö—Ä–∞–Ω–∏–ª–∏—â–µ (–∫–∞–∫ –≤ –º–æ–¥—É–ª–µ 28).

–ú–µ—Ç–æ–¥—ã:
- `getAll()` ‚Äî –≤—Å–µ –∑–∞–º–µ—Ç–∫–∏
- `add(item)` ‚Äî –¥–æ–±–∞–≤–∏—Ç—å —Å –∞–≤—Ç–æ-id
- `update(id, changes)` ‚Äî –æ–±–Ω–æ–≤–∏—Ç—å
- `remove(id)` ‚Äî —É–¥–∞–ª–∏—Ç—å

### –ß–∞—Å—Ç—å 2: Backend (server.js)

–°–æ–∑–¥–∞–π—Ç–µ `createApp(store)` ‚Äî Express-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ.

**–ü—Ä–∏–Ω–∏–º–∞–µ—Ç** –æ–±—ä–µ–∫—Ç store (–∏–∑ store.js) –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å –¥–∞–Ω–Ω—ã–º–∏.

**Middleware:** express.json(), CORS

**–≠–Ω–¥–ø–æ–∏–Ω—Ç—ã:**
- `GET /api/notes` ‚Äî –≤—Å–µ –∑–∞–º–µ—Ç–∫–∏
- `POST /api/notes` ‚Äî —Å–æ–∑–¥–∞—Ç—å (body: `{ title, text }`) ‚Üí 201
- `PATCH /api/notes/:id` ‚Äî –æ–±–Ω–æ–≤–∏—Ç—å (body: `{ title?, text? }`) ‚Üí 200
- `DELETE /api/notes/:id` ‚Äî —É–¥–∞–ª–∏—Ç—å ‚Üí 204

**–§–æ—Ä–º–∞—Ç –∑–∞–º–µ—Ç–∫–∏:** `{ id, title, text, createdAt }`

`createdAt` ‚Äî ISO-—Å—Ç—Ä–æ–∫–∞, —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç—Å—è –ø—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏.

### –ß–∞—Å—Ç—å 3: Frontend (App.jsx)

–°–æ–∑–¥–∞–π—Ç–µ —Ç—Ä–∏ React-–∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞:

1. `NoteList({ notes })`:
   - –ü—Ä–∏–Ω–∏–º–∞–µ—Ç –º–∞—Å—Å–∏–≤ –∑–∞–º–µ—Ç–æ–∫
   - –†–µ–Ω–¥–µ—Ä–∏—Ç `<ul data-testid="note-list">`
   - –ö–∞–∂–¥–∞—è –∑–∞–º–µ—Ç–∫–∞ ‚Äî `<li>` —Å `data-testid="note-item"`
   - –í–Ω—É—Ç—Ä–∏: `<h3>` —Å title –∏ `<p>` —Å text

2. `AddNoteForm({ onAdd })`:
   - –î–≤–∞ input: title (placeholder="–ó–∞–≥–æ–ª–æ–≤–æ–∫") –∏ text (placeholder="–¢–µ–∫—Å—Ç –∑–∞–º–µ—Ç–∫–∏")
   - –ö–Ω–æ–ø–∫–∞ submit
   - –ü—Ä–∏ —Å–∞–±–º–∏—Ç–µ –≤—ã–∑—ã–≤–∞–µ—Ç `onAdd({ title, text })` –∏ –æ—á–∏—â–∞–µ—Ç –ø–æ–ª—è

3. `App({ url })`:
   - –ó–∞–≥—Ä—É–∂–∞–µ—Ç –∑–∞–º–µ—Ç–∫–∏ –ø—Ä–∏ –º–æ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–∏–∏: `GET {url}/api/notes`
   - –ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç `<AddNoteForm>` –∏ `<NoteList>`
   - –ü—Ä–∏ –¥–æ–±–∞–≤–ª–µ–Ω–∏–∏: `POST {url}/api/notes`, –æ–±–Ω–æ–≤–ª—è–µ—Ç —Å–ø–∏—Å–æ–∫
   - –ü—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ: `<p data-testid="loading">–ó–∞–≥—Ä—É–∑–∫–∞...</p>`

### –ü—Ä–∏–º–µ—Ä—ã

```javascript
// Store
const store = createStore('/tmp/notes.json');
store.add({ title: '–ü—Ä–∏–≤–µ—Ç', text: '–ü–µ—Ä–≤–∞—è –∑–∞–º–µ—Ç–∫–∞' });
// { id: 1, title: '–ü—Ä–∏–≤–µ—Ç', text: '–ü–µ—Ä–≤–∞—è –∑–∞–º–µ—Ç–∫–∞', createdAt: '2024-...' }

// API
// POST /api/notes + { title: 'Test', text: 'Content' }
// ‚Üí 201 { id: 1, title: 'Test', text: 'Content', createdAt: '...' }

// React
<App url="http://localhost:3000" />
// ‚Üí –ó–∞–≥—Ä—É–∂–∞–µ—Ç –∑–∞–º–µ—Ç–∫–∏, –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç —Ñ–æ—Ä–º—É –∏ —Å–ø–∏—Å–æ–∫
```

---

## üí≠ –ü–æ–¥—Å–∫–∞–∑–∫–∏

<details>
<summary>–ü–æ–¥—Å–∫–∞–∑–∫–∞ 1: –ù–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–µ</summary>

–ü—Ä–æ–µ–∫—Ç —Å–æ—Å—Ç–æ–∏—Ç –∏–∑ —Ç—Ä—ë—Ö —Å–ª–æ—ë–≤: store (—Ö—Ä–∞–Ω–∏–ª–∏—â–µ –Ω–∞ –æ—Å–Ω–æ–≤–µ —Ñ–∞–π–ª–∞), server (Express API, –∫–æ—Ç–æ—Ä—ã–π –∏—Å–ø–æ–ª—å–∑—É–µ—Ç store) –∏ frontend (React-–∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã). Store ‚Äî —ç—Ç–æ –ø–æ–≤—Ç–æ—Ä–µ–Ω–∏–µ –º–æ–¥—É–ª—è 28. –ì–¥–µ –∏–º–µ–Ω–Ω–æ –Ω—É–∂–Ω–æ –¥–æ–±–∞–≤–ª—è—Ç—å –ø–æ–ª–µ `createdAt` ‚Äî –≤ store –∏–ª–∏ –≤ server?
</details>

<details>
<summary>–ü–æ–¥—Å–∫–∞–∑–∫–∞ 2: –°—Ç—Ä—É–∫—Ç—É—Ä–∞</summary>

**store.js:** –ü–æ–≤—Ç–æ—Ä–∏—Ç–µ –ø–æ–¥—Ö–æ–¥ –∏–∑ –º–æ–¥—É–ª—è 28 ‚Äî –∑–∞–º—ã–∫–∞–Ω–∏–µ —Å –º–∞—Å—Å–∏–≤–æ–º –¥–∞–Ω–Ω—ã—Ö, —Å—á—ë—Ç—á–∏–∫–æ–º id –∏ —Ñ—É–Ω–∫—Ü–∏–µ–π —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è –≤ —Ñ–∞–π–ª. –ú–µ—Ç–æ–¥—ã `getAll`, `add`, `update`, `remove` —Ä–∞–±–æ—Ç–∞—é—Ç —Å –≤–Ω—É—Ç—Ä–µ–Ω–Ω–∏–º –º–∞—Å—Å–∏–≤–æ–º.

**server.js:** `createApp` –ø—Ä–∏–Ω–∏–º–∞–µ—Ç –≥–æ—Ç–æ–≤—ã–π –æ–±—ä–µ–∫—Ç store –∏ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –µ–≥–æ –º–µ—Ç–æ–¥—ã –≤–Ω—É—Ç—Ä–∏ –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–æ–≤ –º–∞—Ä—à—Ä—É—Ç–æ–≤. –ü–æ–ª–µ `createdAt` –¥–æ–±–∞–≤–ª—è–µ—Ç—Å—è –Ω–∞ —É—Ä–æ–≤–Ω–µ —Å–µ—Ä–≤–µ—Ä–∞ (–ø—Ä–∏ POST), –∞ –Ω–µ –≤ store. CORS –Ω–∞—Å—Ç—Ä–∞–∏–≤–∞–µ—Ç—Å—è —á–µ—Ä–µ–∑ middleware.

**App.jsx:** –¢—Ä–∏ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞. `NoteList` ‚Äî —á–∏—Å—Ç—ã–π –ø—Ä–µ–∑–µ–Ω—Ç–∞—Ü–∏–æ–Ω–Ω—ã–π –∫–æ–º–ø–æ–Ω–µ–Ω—Ç, –ø—Ä–∏–Ω–∏–º–∞—é—â–∏–π –º–∞—Å—Å–∏–≤. `AddNoteForm` ‚Äî —Ñ–æ—Ä–º–∞ —Å –¥–≤—É–º—è –ø–æ–ª—è–º–∏ –∏ –∫–æ–ª–±—ç–∫–æ–º. `App` ‚Äî –≥–ª–∞–≤–Ω—ã–π –∫–æ–º–ø–æ–Ω–µ–Ω—Ç, —É–ø—Ä–∞–≤–ª—è—é—â–∏–π —Å–æ—Å—Ç–æ—è–Ω–∏–µ–º –∏ –∑–∞–ø—Ä–æ—Å–∞–º–∏ –∫ API —á–µ—Ä–µ–∑ `useEffect` –∏ –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ —Å–æ–±—ã—Ç–∏–π.

</details>

<details>
<summary>–ü–æ–¥—Å–∫–∞–∑–∫–∞ 3: –ü–æ–¥—Ö–æ–¥</summary>

**store.js:** –†–µ–∞–ª–∏–∑—É–π—Ç–µ —Ç–∞–∫ –∂–µ, –∫–∞–∫ –≤ –º–æ–¥—É–ª–µ 28. `createStore(filepath)` ‚Äî –∑–∞–≥—Ä—É–∑–∏—Ç–µ –¥–∞–Ω–Ω—ã–µ –∏–∑ —Ñ–∞–π–ª–∞ (–µ—Å–ª–∏ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç), –≤—ã—á–∏—Å–ª–∏—Ç–µ `nextId`. –ú–µ—Ç–æ–¥—ã: `getAll` –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –º–∞—Å—Å–∏–≤, `add` –ø—Ä–∏—Å–≤–∞–∏–≤–∞–µ—Ç id –∏ —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç —Ñ–∞–π–ª, `update` –Ω–∞—Ö–æ–¥–∏—Ç –ø–æ id –∏ –º–µ—Ä–∂–∏—Ç —á–µ—Ä–µ–∑ `Object.assign`, `remove` –Ω–∞—Ö–æ–¥–∏—Ç –∏–Ω–¥–µ–∫—Å –∏ —É–¥–∞–ª—è–µ—Ç —á–µ—Ä–µ–∑ `splice`.

**server.js:** –ü–æ–¥–∫–ª—é—á–∏—Ç–µ `express.json()` –∏ CORS-middleware. –î–ª—è GET `/api/notes` ‚Äî –≤—ã–∑–æ–≤–∏—Ç–µ `store.getAll()` –∏ –æ—Ç–¥–∞–π—Ç–µ —á–µ—Ä–µ–∑ `res.json`. –î–ª—è POST ‚Äî –≤—ã–∑–æ–≤–∏—Ç–µ `store.add` —Å –¥–∞–Ω–Ω—ã–º–∏ –∏–∑ `req.body`, –¥–æ–±–∞–≤–∏–≤ –ø–æ–ª–µ `createdAt` —Å–æ –∑–Ω–∞—á–µ–Ω–∏–µ–º `new Date().toISOString()`, –æ—Ç–≤–µ—Ç—å—Ç–µ 201. –î–ª—è PATCH ‚Äî –≤—ã–∑–æ–≤–∏—Ç–µ `store.update` —Å id –∏–∑ `req.params.id` –∏ –¥–∞–Ω–Ω—ã–º–∏ –∏–∑ `req.body`, –≤–µ—Ä–Ω–∏—Ç–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç (–∏–ª–∏ 404 –µ—Å–ª–∏ `null`). –î–ª—è DELETE ‚Äî –≤—ã–∑–æ–≤–∏—Ç–µ `store.remove`, –≤–µ—Ä–Ω–∏—Ç–µ 204 (–∏–ª–∏ 404 –µ—Å–ª–∏ –≤–µ—Ä–Ω—É–ª–æ—Å—å `false`).

**App.jsx:** `NoteList` ‚Äî —Ä–µ–Ω–¥–µ—Ä–∏—Ç `<ul data-testid="note-list">` —Å `<li data-testid="note-item">`, –≤–Ω—É—Ç—Ä–∏ –∫–∞–∂–¥–æ–≥–æ ‚Äî `<h3>` —Å title –∏ `<p>` —Å text. `AddNoteForm` ‚Äî –¥–≤–∞ –∫–æ–Ω—Ç—Ä–æ–ª–∏—Ä—É–µ–º—ã—Ö input (title –∏ text), –ø—Ä–∏ submit –≤—ã–∑—ã–≤–∞–µ—Ç `onAdd({ title, text })` –∏ –æ—á–∏—â–∞–µ—Ç –ø–æ–ª—è. `App` ‚Äî —Ö—Ä–∞–Ω–∏—Ç `notes` –∏ `loading` –≤ —Å–æ—Å—Ç–æ—è–Ω–∏–∏, –≤ `useEffect` –∑–∞–≥—Ä—É–∂–∞–µ—Ç GET `{url}/api/notes`, –ø—Ä–∏ –¥–æ–±–∞–≤–ª–µ–Ω–∏–∏ –¥–µ–ª–∞–µ—Ç POST –∏ –¥–æ–ø–∏—Å—ã–≤–∞–µ—Ç –Ω–æ–≤—É—é –∑–∞–º–µ—Ç–∫—É –≤ –º–∞—Å—Å–∏–≤ —á–µ—Ä–µ–∑ spread –∏–ª–∏ concat.

</details>

---

## üß™ –ö–∞–∫ –ø—Ä–æ–≤–µ—Ä–∏—Ç—å —Ä–µ—à–µ–Ω–∏–µ

```bash
npx vitest module-32/index.spec.js
npx vitest module-32/App.spec.jsx
```

### –ó–∞–ø—É—Å–∫ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è

```bash
node module-32/start.js
# –û—Ç–∫—Ä–æ–π—Ç–µ http://localhost:3000
```

---

## üéâ –ü–æ–∑–¥—Ä–∞–≤–ª—è–µ–º!

–í—ã –∑–∞–≤–µ—Ä—à–∏–ª–∏ –∫—É—Ä—Å! –¢–µ–ø–µ—Ä—å –≤—ã —É–º–µ–µ—Ç–µ:

- –ü–∏—Å–∞—Ç—å JavaScript (–ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ, —Ñ—É–Ω–∫—Ü–∏–∏, –º–∞—Å—Å–∏–≤—ã, –æ–±—ä–µ–∫—Ç—ã)
- –†–∞–±–æ—Ç–∞—Ç—å —Å –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ—Å—Ç—å—é (callbacks, promises, async/await)
- –ú–∞–Ω–∏–ø—É–ª–∏—Ä–æ–≤–∞—Ç—å DOM –∏ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞—Ç—å —Å–æ–±—ã—Ç–∏—è
- –î–µ–ª–∞—Ç—å HTTP-–∑–∞–ø—Ä–æ—Å—ã (fetch)
- –°–æ–∑–¥–∞–≤–∞—Ç—å —Å–µ—Ä–≤–µ—Ä—ã (http, Express)
- –•—Ä–∞–Ω–∏—Ç—å –¥–∞–Ω–Ω—ã–µ (JSON-—Ñ–∞–π–ª—ã)
- –°—Ç—Ä–æ–∏—Ç—å –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å—ã (React)
- –°–æ–±–∏—Ä–∞—Ç—å fullstack-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è

**–°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏:**
- –ò–∑—É—á–∏—Ç–µ TypeScript
- –ü–æ–ø—Ä–æ–±—É–π—Ç–µ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö (PostgreSQL, MongoDB)
- –î–µ–ø–ª–æ–π—Ç–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ (Vercel, Railway)
- –°–æ–∑–¥–∞–π—Ç–µ —Å–≤–æ–π –ø—Ä–æ–µ–∫—Ç!
